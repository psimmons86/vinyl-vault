<%- include('./partials/header.ejs') %>

<div class="home-container">
    <section class="featured-collectors">
        <h2>Featured Collectors</h2>
        <div class="collectors-grid">
            <% if (users && users.length > 0) { %>
                <% users.forEach(user => { %>
                    <div class="collector-card">
                        <div class="collector-header">
                            <h3><%= user.username %></h3>
                            <span class="member-since">Member since <%= user.joinDate %></span>
                        </div>
                        
                        <div class="collection-preview">
                            <% if (user.recentlyPlayed) { %>
                                <div class="recent-play">
                                    <span class="last-played">Last Played:</span>
                                    <span><%= user.recentlyPlayed.title %> by <%= user.recentlyPlayed.artist %></span>
                                </div>
                            <% } %>
                            
                            <% if (user.recentlyAdded && user.recentlyAdded.length > 0) { %>
                                <div class="recent-additions">
                                    <h4>Recent Additions</h4>
                                    <ul>
                                        <% user.recentlyAdded.forEach(record => { %>
                                            <li>
                                                <%= record.title %> by <%= record.artist %>
                                                <% if (record.createdAt) { %>
                                                    <small class="added-date">
                                                        Added <%= record.createdAt.toLocaleDateString() %>
                                                    </small>
                                                <% } %>
                                            </li>
                                        <% }) %>
                                    </ul>
                                </div>
                            <% } %>
                        </div>
                        
                        <a href="/users/<%= user.username %>" class="view-collection">View Collection</a>
                    </div>
                <% }); %>
            <% } else { %>
                <p class="no-users">No collectors to display yet.</p>
            <% } %>
        </div>
    </section>
</div>

<%- include('./partials/footer.ejs') %>