<%- include('../partials/header.ejs') %>

<div class="collection-stats">
    <p>Total Records: <%= totalRecords %></p>
    
    <% if (mostPlayed && mostPlayed.plays > 0) { %>
        <p>Most Played: <%= mostPlayed.title %> by <%= mostPlayed.artist %> (<%= mostPlayed.plays %> plays)</p>
    <% } %>

    <% if (recentlyPlayed) { %>
        <p>Last Played: <%= recentlyPlayed.title %> (<%= recentlyPlayed.lastPlayed.toLocaleDateString() %>)</p>
    <% } %>
</div>

<div class="sort-controls">
    Sort by:
    <a href="/records?sort=az" class="<%= currentSort === 'az' ? 'active' : '' %>">A-Z</a> |
    <a href="/records?sort=date" class="<%= currentSort === 'date' ? 'active' : '' %>">Date Added</a> |
    <a href="/records">Default</a>
</div>

<a href="/records/new" class="nav-link">Add New Record</a>

<% if (records && records.length) { %>
    <ul class="records-list">
        <% records.forEach(function(record) { %>
            <li>
                <span><%= record.title %> by <%= record.artist %></span>
                <a href="/records/<%= record._id %>" class="details-link">Details</a>
            </li>
        <% }); %>
    </ul>
<% } else { %>
    <p>No records yet!</p>
<% } %>

<%- include('../partials/footer.ejs') %>