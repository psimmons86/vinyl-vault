<%- include('../partials/header.ejs') %>

<div class="feed-container">
    <h1>Recent Activity</h1>

    <div class="activity-feed">
        <% if (activities.length === 0) { %>
            <p class="no-activity">No recent activity to show.</p>
        <% } else { %>
            <% activities.forEach(activity => { %>
                <div class="activity-card">
                    <div class="activity-header">
                        <a href="/users/<%= activity.user.username %>" class="user-link">
                            <strong><%= activity.user.username %></strong>
                        </a>
                        
                        <% if (activity.activityType === 'signup') { %>
                            joined VinylVault
                        <% } else if (activity.activityType === 'add_record') { %>
                            added <a href="/records/<%= activity.record._id %>" class="record-link">
                                <%= activity.record.title %></a> 
                            by <%= activity.record.artist %> to their collection
                        <% } else if (activity.activityType === 'play_record') { %>
                            played <a href="/records/<%= activity.record._id %>" class="record-link">
                                <%= activity.record.title %></a>
                            by <%= activity.record.artist %>
                        <% } %>
                    </div>
                    <div class="activity-timestamp">
                        <%= new Date(activity.createdAt).toLocaleString() %>
                    </div>
                </div>
            <% }) %>
        <% } %>
    </div>
</div>

<%- include('../partials/footer.ejs') %>